{{!-- Detailed Summary Template --}}
{{!-- Generates comprehensive session summaries with full context --}}

# Session Summary: {{session.project}}

**Session ID:** `{{session.id}}`
**Date:** {{formatDate session.created_at "MMMM D, YYYY h:mm A"}}
**Duration:** {{session.duration}}

---

## Overview

{{#if summary}}
### What was requested
{{summary.request}}

### What was investigated
{{summary.investigated}}

### What was learned
{{summary.learned}}

### What was completed
{{summary.completed}}

{{#if summary.next_steps}}
### Next steps
{{summary.next_steps}}
{{/if}}

{{#if summary.notes}}
### Additional notes
{{summary.notes}}
{{/if}}
{{else}}
*No summary available for this session.*
{{/if}}

---

## Observations ({{observations.length}})

{{#each observations}}
### {{typeIcon this.type}} {{this.title}}

{{#if this.subtitle}}
*{{this.subtitle}}*
{{/if}}

{{this.narrative}}

{{#if this.facts}}
**Key Facts:**
{{#each this.facts}}
- {{this}}
{{/each}}
{{/if}}

{{#if this.concepts}}
**Concepts:** {{#each this.concepts}}`{{this}}` {{/each}}
{{/if}}

{{#if this.files_modified}}
**Files Modified:**
{{#each this.files_modified}}
- `{{this}}`
{{/each}}
{{/if}}

{{#if this.files_read}}
**Files Read:**
{{#each this.files_read}}
- `{{this}}`
{{/each}}
{{/if}}

<small>*Prompt #{{this.prompt_number}} | {{formatDate this.created_at "h:mm A"}}*</small>

---

{{/each}}

## Statistics

| Metric | Value |
|--------|-------|
| Total Observations | {{observations.length}} |
| Discoveries | {{countByType observations "discovery"}} |
| Decisions | {{countByType observations "decision"}} |
| Implementations | {{countByType observations "implementation"}} |
| Issues | {{countByType observations "issue"}} |
| Learnings | {{countByType observations "learning"}} |
| Files Modified | {{uniqueCount observations "files_modified"}} |
| Files Read | {{uniqueCount observations "files_read"}} |
| Unique Concepts | {{uniqueCount observations "concepts"}} |

---

## Concepts Index

{{#each (uniqueConcepts observations)}}
- **{{this.concept}}** ({{this.count}} occurrences)
{{/each}}

---

## Files Index

### Modified
{{#each (uniqueFiles observations "files_modified")}}
- `{{this}}`
{{/each}}

### Read
{{#each (uniqueFiles observations "files_read")}}
- `{{this}}`
{{/each}}

---

*Generated by claude-recall on {{formatDate now "MMMM D, YYYY h:mm A"}}*
